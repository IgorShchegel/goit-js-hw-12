{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nhideLoader();\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const searchQuery = searchInput.value;\n  gallery.innerHTML = '';\n  showLoader();\n\n  fetchImages(searchQuery)\n    .then(images => {\n      displayImages(images);\n      hideLoader();\n    })\n    .catch(error => {\n      showMessage(error);\n      hideLoader();\n    })\n    .finally(() => form.reset());\n});\n\nfunction fetchImages(query) {\n  return new Promise((resolve, reject) => {\n    const key = '41984486-af85e40ac9c664bf86aaf37aa';\n    const urlParams = new URLSearchParams({\n      key: key,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    const url = `https://pixabay.com/api/?${urlParams}`;\n\n    fetch(url)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      })\n      .then(data => {\n        if (data.hits.length === 0) {\n          reject(\n            'Sorry, there are no images matching your search query. Please try again!'\n          );\n        } else {\n          resolve(data.hits);\n        }\n      })\n      .catch(error => reject(error));\n  });\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction displayImages(images) {\n  gallery.innerHTML = '';\n  gallery.innerHTML = createMarkup(images);\n  lightbox.refresh();\n}\n\nfunction createMarkup(image) {\n  return image\n    .map(\n      image =>\n        `<li>\n         <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n           <img\n               class=\"gallery-image\"\n               src=\"${image.webformatURL}\"\n               alt=\"${image.tags}\"\n            />\n            <ul class=\"info\">\n            <li class=\"info-items\">Likes: ${image.likes}</li>\n            <li class=\"info-items\">Views: ${image.views}</li>\n            <li class=\"info-items\">Comments: ${image.comments}</li>\n            <li class=\"info-items\">Downloads: ${image.downloads}</li>\n            </ul>\n         </a> \n        </li>   \n  `\n    )\n    .join('');\n}\n\nfunction showMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n"],"names":["searchForm","searchInput","gallery","loader","hideLoader","event","form","searchQuery","showLoader","fetchImages","images","displayImages","error","showMessage","query","resolve","reject","key","url","response","data","lightbox","SimpleLightbox","createMarkup","image","message","iziToast"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CC,IAEAJ,EAAW,iBAAiB,SAAUK,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbE,EAAcN,EAAY,MAChCC,EAAQ,UAAY,GACpBM,IAEAC,EAAYF,CAAW,EACpB,KAAKG,GAAU,CACdC,EAAcD,CAAM,EACpBN,GACN,CAAK,EACA,MAAMQ,GAAS,CACdC,EAAYD,CAAK,EACjBR,GACN,CAAK,EACA,QAAQ,IAAME,EAAK,MAAK,CAAE,CAC/B,CAAC,EAED,SAASG,EAAYK,EAAO,CAC1B,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,MAAMC,EAAM,qCASNC,EAAM,4BARM,IAAI,gBAAgB,CACpC,IAAKD,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,CAAK,CAEgD,GAEjD,MAAMI,CAAG,EACN,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQ,CACRA,EAAK,KAAK,SAAW,EACvBJ,EACE,0EACZ,EAEUD,EAAQK,EAAK,IAAI,CAE3B,CAAO,EACA,MAAMR,GAASI,EAAOJ,CAAK,CAAC,CACnC,CAAG,CACH,CAEA,MAAMS,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASX,EAAcD,EAAQ,CAC7BR,EAAQ,UAAY,GACpBA,EAAQ,UAAYqB,EAAab,CAAM,EACvCW,EAAS,QAAO,CAClB,CAEA,SAASE,EAAaC,EAAO,CAC3B,OAAOA,EACJ,IACCA,GACE;AAAA,yCACiCA,EAAM,aAAa;AAAA;AAAA;AAAA,sBAGtCA,EAAM,YAAY;AAAA,sBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,4CAGYA,EAAM,KAAK;AAAA,4CACXA,EAAM,KAAK;AAAA,+CACRA,EAAM,QAAQ;AAAA,gDACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAK1D,EACA,KAAK,EAAE,CACZ,CAEA,SAASX,EAAYY,EAAS,CAC5BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CAEA,SAASjB,GAAa,CACpBL,EAAO,MAAM,QAAU,OACzB,CAEA,SAASC,GAAa,CACpBD,EAAO,MAAM,QAAU,MACzB"}